<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="author" content="Janith">
    <meta name="description" content="Janith's blog">
    <link rel="icon" href="https://janithl.github.io/favicon.ico">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abhaya+Libre:400,700&amp;subset=sinhala">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/readable/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://janithl.github.io/theme/css/style.css">
    <link rel="stylesheet" type="text/css" href="https://janithl.github.io/theme/css/pygments.css">

    <title>Janith's Blog &ndash; Building Flagitect</title>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7602960-7']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

    <link href="https://janithl.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Janith's Blog Atom" />

<meta name="keywords" content="code, design">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://janithl.github.io/">Janith's Blog</a>
            </div>

            <div class="collapse navbar-collapse" id="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">

                    <li><a href="https://janithl.github.io/pages/about.html">About</a></li>

                    <li class="active"><a href="https://janithl.github.io/category/general/">General</a></li>
                    <li><a href="https://janithl.github.io/category/links/">Links</a></li>
                    <li><a href="https://janithl.github.io/category/personal/">Personal</a></li>

                    <li><a href="https://github.com/janithl" target="_blank">Github</a></li>

                    <li><a href="https://janithl.github.io/archives.html">Archives</a></li>


                    <li class="dropdown">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tags <span class="caret"></span></a>
                      <ul class="dropdown-menu">
                          <li><a href="https://janithl.github.io/tag/biology/">biology</a></li>
                          <li><a href="https://janithl.github.io/tag/casey-neistat/">casey neistat</a></li>
                          <li><a href="https://janithl.github.io/tag/code/">code</a></li>
                          <li><a href="https://janithl.github.io/tag/comics/">comics</a></li>
                          <li><a href="https://janithl.github.io/tag/conflict/">conflict</a></li>
                          <li><a href="https://janithl.github.io/tag/conversations/">conversations</a></li>
                          <li><a href="https://janithl.github.io/tag/data/">data</a></li>
                          <li><a href="https://janithl.github.io/tag/design/">design</a></li>
                          <li><a href="https://janithl.github.io/tag/docker/">docker</a></li>
                          <li><a href="https://janithl.github.io/tag/education/">education</a></li>
                          <li><a href="https://janithl.github.io/tag/films/">films</a></li>
                          <li><a href="https://janithl.github.io/tag/geopolitics/">geopolitics</a></li>
                          <li><a href="https://janithl.github.io/tag/golang/">golang</a></li>
                          <li><a href="https://janithl.github.io/tag/machine-learning/">machine learning</a></li>
                          <li><a href="https://janithl.github.io/tag/music/">music</a></li>
                          <li><a href="https://janithl.github.io/tag/oasis/">oasis</a></li>
                          <li><a href="https://janithl.github.io/tag/people/">people</a></li>
                          <li><a href="https://janithl.github.io/tag/politics/">politics</a></li>
                          <li><a href="https://janithl.github.io/tag/prudishness/">prudishness</a></li>
                          <li><a href="https://janithl.github.io/tag/religion/">religion</a></li>
                          <li><a href="https://janithl.github.io/tag/sexuality/">sexuality</a></li>
                          <li><a href="https://janithl.github.io/tag/sinhala/">sinhala</a></li>
                          <li><a href="https://janithl.github.io/tag/travel/">travel</a></li>
                          <li><a href="https://janithl.github.io/tag/uni/">uni</a></li>
                          <li><a href="https://janithl.github.io/tag/wes-anderson/">wes anderson</a></li>
                          <li><a href="https://janithl.github.io/tag/work/">work</a></li>
                      </ul>
                    </li>

                    <li><a href="https://janithl.github.io/feeds/all.atom.xml">Atom</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container">
<article>
  <div class="article_title">
    <h3><a href="https://janithl.github.io/2020/06/building-flagitect/">Building Flagitect</a></h3>
    <p class="lead">just like a wavin flag</p><hr>
  </div>
  <div class="article_text">
    <p><a href="https://play.google.com/store/apps/details?id=com.flagitect">Flagitect just hit version 1.2.0</a>, and so this is a brief introduction
into the technical aspects of how the app is structured.</p>
<p><img alt="Flagitect v1.2.0" src="https://janithl.github.io/images/flagitect-1.2.0.jpg"></p>
<h3>Stack</h3>
<p>The app is written in React Native (currently version 0.62). There is no navigation
library in use, as the app only needs some modals in the UI at the moment. The editor
uses <a href="https://github.com/react-native-community/react-native-svg">react-native-svg</a> to render the flags. <a href="https://github.com/joltup/rn-fetch-blob">rn-fetch-blob</a> is used to save
the various output files (as a PNG raster or SVG vector inside an HTML) to device storage.</p>
<h3>State Management</h3>
<p>State is managed using a <a href="https://reactjs.org/docs/hooks-reference.html#usereducer">single <code>useReducer</code> hook</a> near the root of the component
tree. The store is currently divided into 3 parts with their own reducer functions:
flag, ui, and charges. I found this approach had most of the advantages of Redux (since
the component tree was shallow and I didn't need to use the Context API) when it came to
composing the state and reducers. I use two <code>useEffect</code> hooks to store the state in
device storage<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> whenever it changes, and load it from storage at app start.</p>
<h3>Components</h3>
<p>There is your standard <code>Header</code>, <code>Footer</code>, <code>Menu</code> etc. components, and a bunch
of <code>renderSomething</code> components that render either charges or divisions. Most of the
action happens inside the <code>Editor</code> component, and we're using SVG—a fantastic language
that really should get more love—for the design and layout of shapes and designs. I
used a bunch of SVG features such as <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Patterns">patterns</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform">transform</a> to enable various
rendering needs.</p>
<h3>Finally</h3>
<p><a href="https://github.com/janithl/Flagitect">Flagitect is completely free and open source (MIT licensed)</a>, and I'd love for
people using it to submit issues and PRs, or even fork it and make things better. I
found that Google Play was lacking when it came to flag design apps, and so I created
Flagitect in the hope that amateur vexillologists like myself would find it useful. ☺️</p>
<div class="footnote">
<hr>
<ol>
<li id="fn:1">
<p>For this, I'm using <a href="https://github.com/react-native-community/async-storage">React Native Async Storage</a> as this functionality has been spun off from the React Native core.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
  </div>
  <div class="article_meta">
    <p>Posted on: Sun 28 June 2020</p>
    <p>Category: <a href="https://janithl.github.io/category/general/">General</a>
 &ndash; Tags:
      <a href="https://janithl.github.io/tag/code/">code</a>,      <a href="https://janithl.github.io/tag/design/">design</a>    </p>
  </div>

  <div id="article_comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "2020/06/building-flagitect/";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = '//janithl.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>

    </div>

    <div id="ending_message">
        <hr>
        <p>Built using <a href="http://getpelican.com" target="_blank">Pelican</a>.</p>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</body>
</html>